// SPDX-License-Identifier: Apache-2.0
pragma solidity ^0.8.24;

import "./PatientRecord.sol";

/// @title PatientRecordFactory - one PatientRecord per owner address
contract PatientRecordFactory {
    mapping(address => address) public recordOf; // owner => PatientRecord

    event RecordCreated(address indexed owner, address indexed record);

    function createRecord() external returns (address record) {
        require(recordOf[msg.sender] == address(0), "record exists");
        record = address(new PatientRecord(msg.sender));
        recordOf[msg.sender] = record;
        emit RecordCreated(msg.sender, record);
    }
}
